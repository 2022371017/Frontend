<!-- Dashboard Header -->
<div class="dashboard-header">
  <div class="header-content">
    <button class="back-btn" [routerLink]="['/index']">
      <i class="pi pi-arrow-left"></i>
    </button>
    <div class="header-info">
      <h1 class="dashboard-title">Dashboard de Logs</h1>
      <p class="dashboard-subtitle">Análisis detallado de tu actividad y rendimiento</p>
    </div>
    <button class="refresh-btn" (click)="refreshData()">
      <i class="pi pi-refresh"></i>
    </button>
  </div>
</div>

<!-- Main Dashboard Content -->
<div class="dashboard-container">
  
  <!-- KPI Cards -->
  <section class="kpi-section">
    <div class="kpi-grid">
      
      <!-- Total de Logs -->
      <div class="kpi-card">
        <div class="kpi-header">
          <div class="kpi-icon blue">
            <i class="pi pi-list"></i>
          </div>
        </div>
        <div class="kpi-content">
          <div class="kpi-number">{{ totalLogs || 493 }}</div>
          <div class="kpi-label">Total de Logs</div>
          <div class="kpi-change positive">
            <i class="pi pi-arrow-up"></i>
            <span>+12%</span>
          </div>
        </div>
      </div>

      <!-- Tiempo Promedio -->
      <div class="kpi-card">
        <div class="kpi-header">
          <div class="kpi-icon green">
            <i class="pi pi-clock"></i>
          </div>
        </div>
        <div class="kpi-content">
          <div class="kpi-number">{{ avgMs || 19 }}ms</div>
          <div class="kpi-label">Tiempo Promedio</div>
          <div class="kpi-change negative">
            <i class="pi pi-arrow-down"></i>
            <span>-5%</span>
          </div>
        </div>
      </div>

      <!-- Más Rápido -->
      <div class="kpi-card">
        <div class="kpi-header">
          <div class="kpi-icon orange">
            <i class="pi pi-bolt"></i>
          </div>
        </div>
        <div class="kpi-content">
          <div class="kpi-number">{{ minMs || 0 }}ms</div>
          <div class="kpi-label">Más Rápido</div>
          <div class="kpi-change positive">
            <i class="pi pi-arrow-up"></i>
            <span>+8%</span>
          </div>
        </div>
      </div>

      <!-- Más Lento -->
      <div class="kpi-card">
        <div class="kpi-header">
          <div class="kpi-icon red">
            <i class="pi pi-times"></i>
          </div>
        </div>
        <div class="kpi-content">
          <div class="kpi-number">{{ maxMs || 240 }}ms</div>
          <div class="kpi-label">Más Lento</div>
          <div class="kpi-change negative">
            <i class="pi pi-arrow-down"></i>
            <span>-3%</span>
          </div>
        </div>
      </div>

    </div>
  </section>

  <!-- Charts Section -->
  <section class="charts-section">
    
    <!-- Status Codes Chart -->
    <div class="chart-card">
      <div class="chart-header">
        <h3 class="chart-title">
          <i class="pi pi-chart-pie"></i>
          Códigos de Estado
        </h3>
        <div class="chart-legend">
          <div class="legend-item">
            <div class="legend-color green"></div>
            <span>200-299</span>
          </div>
          <div class="legend-item">
            <div class="legend-color orange"></div>
            <span>300-399</span>
          </div>
          <div class="legend-item">
            <div class="legend-color red"></div>
            <span>400-500</span>
          </div>
        </div>
      </div>
      <div class="chart-content">
        <p-chart 
          *ngIf="statusChartData" 
          type="doughnut" 
          [data]="statusChartData" 
          [options]="statusChartOptions" 
          class="status-chart">
        </p-chart>
      </div>
    </div>

    <!-- API Usage Chart -->
    <div class="chart-card">
      <div class="chart-header">
        <h3 class="chart-title">
          <i class="pi pi-chart-bar"></i>
          APIs Más Consumidas
        </h3>
        <div class="chart-subtitle">Top 7 endpoints más utilizados</div>
      </div>
      <div class="chart-content">
        <p-chart 
          *ngIf="usageChartData" 
          type="bar" 
          [data]="usageChartData" 
          [options]="usageChartOptions" 
          class="usage-chart">
        </p-chart>
      </div>
      <div class="chart-footer">
        <div class="endpoint-info">
          <div class="endpoint-item">
            <span class="endpoint-label">Más usada:</span>
            <span class="endpoint-value">{{ mostUsedApi || '/api/logs' }}</span>
          </div>
          <div class="endpoint-item">
            <span class="endpoint-label">Menos usada:</span>
            <span class="endpoint-value">{{ leastUsedApi || '/vendor/phpunit/phpunit/src/Util/PHP/eval-stdin.php' }}</span>
          </div>
        </div>
      </div>
    </div>

  </section>

</div>

